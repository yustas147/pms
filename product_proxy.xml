<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

              <!-- product_proxy ################################################# -->

          <record id="product_proxy_form" model="ir.ui.view">
            <field name="name">product.proxy.form</field>
            <field name="model">product.proxy</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form>
                  <head>
                	  <button name='get_lower_price' type='object' string='Get lower price' />
                  </head>
                  <sheet>
                  <group col="8">
                	<group string="Common data" colspan="2">
                		<field name="name" />
                		<field name="supplier_id"  />
                		<field name="if_etalon"  />
                	</group>
                	<group string="Pricelist data" attrs="{'invisible':[('if_etalon', '=', True)]}" colspan="2">
                		<field name="etalon_id" domain="[('if_etalon','=',True)]" />
                		<field name="quantity" />
                		<field name="price" />
               			<field name="default_code"/>
                	</group>
                	</group>
                	<field name="proxy_ids" attrs="{'invisible':[('if_etalon', '=', False)]}">
                		<tree>
                			<field name="supplier_id"/>
                			<field name="quantity"/>
                			<field name="price"/>
                		</tree>
                	</field>

                   </sheet>
                </form>
            </field>
          </record>
          <record id="product_proxy_tree" model="ir.ui.view">
            <field name="name">product.proxy.tree</field>
            <field name="model">product.proxy</field>
            <field name="arch" type="xml">
               <tree>
                	<field name="name" />
 	               	<field name="etalon_id" />
               		<field name="if_etalon"  />
               </tree>
            </field>
          </record>
          
           <!-- product_product ################################################# -->

          <record id="product_product_proxy_form_inh" model="ir.ui.view">
            <field name="name">product.normal.form.proxy</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_normal_form_view" />
            <field name="type">form</field>
            <field name="arch" type="xml">
                <xpath expr="//sheet" position="before">
                    <header>
                		    <button name='open_virt' type='object' string='Open virtual product'/>
                		    <!-- <button name='set_virtual_stock' type='object' string='Set virtual stock'/> -->
                		    <button name='create_proxy' type='object' string='Create proxy' attrs="{'invisible':[('proxy_id','!=',False)]}"/>
                		    <button name='set_lowest_lst_price' type='object' string='Set lowest price' attrs="{'invisible':[('proxy_id','=',False)]}"/>
                		    <button name='update_magento_price' type='object' string='upd mag price' />
                    </header>
                </xpath>
                <xpath expr="//notebook" position="inside">
                	<page string="PMS">
                		<group colspan="4">
                			<field name="virtual_type"/>
                			<field name="proxy_id"/>
                			<field name="virt_stock"/>
                		</group>
                			<field name="proxy_ids">
                			    <tree>
		                			<field name="supplier_id"/>
		                			<field name="quantity"/>
		                			<field name="price"/>
		                		</tree>
                			</field>
                	</page>
                </xpath>
            </field>
          </record>
          
           <!-- virt_tire ################################################# -->

          <record id="virt_tire_form" model="ir.ui.view">
          	<field name="name">virt.tire.form</field>
          	<field name="model">virt.tire</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              	<form>
              	    <header>
	                   <button name="parse_all_name" string="Parse all name" type="object" />	
	                   <button name="get_parser_dict" string="Export dict data for parser" type="object" />	
	                   <button name="parse_brand" string="Parse brand" type="object" attrs="{'invisible':[('tire_brand', '!=', False)]}" class="oe_highlight"/>	
	                   <button name="parse_model" string="Parse model" type="object" attrs="{'invisible':[('tire_model', '!=', False)]}" class="oe_highlight"/>	
	                   <button name="parse_wpd" string="Parse wpd" type="object" attrs="{'invisible':[('tire_wpd', '!=', False)]}" class="oe_highlight"/>	
	                   <button name="parse_wsp" string="Parse wsp" type="object" attrs="{'invisible':[('tire_wsp', '!=', False)]}" class="oe_highlight"/>	
	                   <button name="parse_studness" string="Parse studness" type="object" attrs="{'invisible':[('tire_studness', '!=', False)]}" class="oe_highlight"/>	
	                   
	                   <button name="autoconnect" string="autoconnect" type="object" attrs="{'invisible':[('if_etalon', '=', True)]}"/>	
	                   <button name="conn_to_me" string="connect to me" type="object" attrs="{'invisible':[('if_etalon', '=', False)]}"/>	
	                   <button name="clear_parsed_fields" string="clear parsed fields" type="object" />	
	                   <button name="disconnect_etalon" string="disconnect from etalon" type="object" attrs="{'invisible':[('etalon_id', '=', False)]}"/>
				    </header>
               		<sheet>
               		    <group>
	            			<group name="Common data" colspan="1">
	                			<field name="name"/>
		                		<field name="supplier_id"  />
		                		<field name="if_etalon"  />
			                	<field name="tire_brand"/>	
			                	<field name="tire_model"/>	
			                	<field name="tire_wsp"/>	
			                	<field name="tire_wpd"/>	
			                	<field name="tire_studness"/>	
	            			</group>
	            			<group name="Supplier`s data" colspan="1">
	                		    <field name="quantity" attrs="{'invisible':[('if_etalon', '=', True)]}"/>
	                		    <field name="price" attrs="{'invisible':[('if_etalon', '=', True)]}"/>
                     			<field name="default_code" attrs="{'invisible':[('if_etalon', '=', True)]}"/>
	                		    <field name="etalon_id" domain="[('if_etalon','=',True)]"  attrs="{'invisible':[('if_etalon', '=', True)]}"/>
	                		    <field name="etalonic_select" attrs="{'invisible':[('if_etalon', '=', True)]}"/>
	                		    <field name="reverse_etalonic_select" attrs="{'invisible':[('if_etalon', '=', False)]}"/>
	                		    <label string="Possible etalons" attrs="{'invisible':[('if_etalon', '=', True)]}"/>
	                		    <field name="etalonic_list" nolabel="1" colspan="2" attrs="{'invisible':[('if_etalon', '=', True)]}">
	                		    	<tree>
	                		    	    <field name="name" />
	                		    	</tree>
	                		    </field>
	                		    <label string="Possible non-etalons" attrs="{'invisible':[('if_etalon', '=', False)]}"/>
	                		    <field name="reverse_etalonic_list" nolabel="1" colspan="2" attrs="{'invisible':[('if_etalon', '=', False)]}" >
	                		    	<tree>
	                		    	    <field name="name" />
	                		    	</tree>
	                		    </field>
	                	    </group>	
                	    </group>
	                	<field name="proxy_ids" attrs="{'invisible':[('if_etalon', '=', False)]}">
	                		<tree>
	                			<field name="supplier_id"/>
	                			<field name="quantity"/>
	                			<field name="price"/>
	                		</tree>
	                	</field>
               		</sheet>
              	</form>
         	</field> 
          </record>
          
          <record id="virt_tire_tree" model="ir.ui.view">
          	<field name="name">virt.tire.tree</field>
          	<field name="model">virt.tire</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
            	<tree>
                			<field name="name"/>
		                	<field name="tire_brand"/>	
		                	<field name="tire_model"/>	
		                	<field name="tire_wsp"/>	
		                	<field name="tire_wpd"/>	
                			<field name="default_code"/>
	                		<field name="if_etalon"  />

                </tree>
         	</field> 
          </record>
          
          <!-- virt_disk ################################################# -->

          <record id="virt_disk_form" model="ir.ui.view">
          	<field name="name">virt.disk.form</field>
          	<field name="model">virt.disk</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              	<form>
              	    <header>
	                   <button name="parse_all_name" string="Parse all name" type="object" />	
	                   <button name="parse_brand" string="Parse brand" type="object" attrs="{'invisible':[('brand', '!=', False)]}" class="oe_highlight"/>	
	                   <button name="parse_model" string="Parse model" type="object" attrs="{'invisible':[('model', '!=', False)]}" class="oe_highlight"/>	
	                   <button name="parse_wrsize" string="Parse WRSize" type="object" attrs="{'invisible':[('wrsize', '!=', False)]}" class="oe_highlight"/>	
	                   <button name="parse_pcd" string="Parse PCD" type="object" attrs="{'invisible':[('pcd', '!=', False)]}" class="oe_highlight"/>	
	                   <button name="parse_dia" string="Parse DIA" type="object" attrs="{'invisible':[('dia', '!=', False)]}" class="oe_highlight"/>	
	                   <button name="parse_et" string="Parse ET" type="object" attrs="{'invisible':[('et', '!=', False)]}" class="oe_highlight"/>	
	                   <button name="parse_paint" string="Parse Painting" type="object" attrs="{'invisible':[('paint', '!=', False)]}" class="oe_highlight"/>	
<!-- 	                   <button name="get_parser_dict" string="Export dict data for parser" type="object" />	 -->
	                   <button name="autoconnect" string="autoconnect" type="object" attrs="{'invisible':[('if_etalon', '=', True)]}"/>	
	                   <button name="conn_to_me" string="connect to me" type="object" attrs="{'invisible':[('if_etalon', '=', False)]}"/>	
	                   <button name="clear_parsed_fields" string="clear parsed fields" type="object" />	
	                   <button name="disconnect_etalon" string="disconnect from etalon" type="object" attrs="{'invisible':[('etalon_id', '=', False)]}"/>	
				    </header>
               		<sheet>
               		    <group>
	            			<group name="Common data" colspan="1" >
	                			<field name="name"/>
		                		<field name="supplier_id"  />
		                		<field name="if_etalon"  />
			                	<field name="brand"/>	
			                	<field name="model"/>	
			                	<field name="wrsize"/>	
			                	<field name="pcd"/>	
			                	<field name="et"/>	
			                	<field name="dia"/>	
			                	<field name="paint"/>	
			                	<field name="type"/>	
			                	<field name="country"/>	
	            			</group>
	            			<group name="Specific data"  colspan="1">
	                		    <field name="quantity" attrs="{'invisible':[('if_etalon', '=', True)]}"/>
	                		    <field name="price" attrs="{'invisible':[('if_etalon', '=', True)]}"/>
                    			<field name="default_code" attrs="{'invisible':[('if_etalon', '=', True)]}"/>
	                		    <field name="etalon_id" domain="[('if_etalon','=',True)]"  attrs="{'invisible':[('if_etalon', '=', True)]}"/>
                    			<field name="etalonic_select" attrs="{'invisible':[('if_etalon', '=', True)]}"/>
                    			<field name="reverse_etalonic_select" attrs="{'invisible':[('if_etalon', '=', False)]}"/> 
                    			<label string="Possible etalons" attrs="{'invisible':[('if_etalon', '=', True)]}"/>
	                		    <field name="etalonic_list" nolabel="1" colspan="2" attrs="{'invisible':[('if_etalon', '=', True)]}">
	                		    	<tree>
	                		    	    <field name="name" />
	                		    	</tree>
	                		    </field>
                    			<label string="Possible non-etalons" attrs="{'invisible':[('if_etalon', '=', False)]}"/>
	                		    <field name="reverse_etalonic_list" nolabel="1" colspan="2" attrs="{'invisible':[('if_etalon', '=', False)]}" >
	                		    	<tree>
	                		    	    <field name="name" />
	                		    	</tree>
	                		    </field>
	                	    </group>
                	    </group>
	                	<field name="proxy_ids" attrs="{'invisible':[('if_etalon', '=', False)]}">
	                		<tree>
	                			<field name="supplier_id"/>
	                			<field name="quantity"/>
	                			<field name="price"/>
	                		</tree>
	                	</field>
               		</sheet>
              	</form>
         	</field> 
          </record>
          
          <record id="virt_disk_tree" model="ir.ui.view">
          	<field name="name">virt.disk.tree</field>
          	<field name="model">virt.disk</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
            	<tree>
                			<field name="name"/>
		                	<field name="brand"/>	
		                	<field name="model"/>	
		                	<field name="wrsize"/>	
		                	<field name="pcd"/>	
		                	<field name="et"/>	
		                	<field name="dia"/>	
		                	<field name="paint"/>	
	                		<field name="if_etalon"  />
     	                	<field name="type"/>	
		                	<field name="country"/>	
                </tree>
         	</field> 
          </record>

           <!-- mBrand ################################################# -->
            <record id="mbrand_form" model="ir.ui.view">
          	<field name="name">mbrand.form</field>
          	<field name="model">mbrand</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              	<form>
               		<sheet>
            			<group>
                			<field name="name"/>
            			</group>
               		</sheet>
              	</form>
         	</field> 
          </record>
          
          <record id="mbrand_tree" model="ir.ui.view">
          	<field name="name">mbrand.tree</field>
          	<field name="model">mbrand</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
            	<tree>
                			<field name="name"/>
                </tree>
         	</field> 
          </record>
           

           <!-- mModel ################################################# -->
           <record id="mmodel_form" model="ir.ui.view">
          	<field name="name">mmodel.form</field>
          	<field name="model">mmodel</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              	<form>
               		<sheet>
            			<group>
                			<field name="name"/>
            			</group>
               		</sheet>
              	</form>
         	</field> 
          </record>
          
          <record id="mmodel_tree" model="ir.ui.view">
          	<field name="name">mmodel.tree</field>
          	<field name="model">mmodel</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
            	<tree>
                			<field name="name"/>
                </tree>
         	</field> 
          </record>
          
           <record id="parse_name_all_server_act" model="ir.actions.server">
               <field name="name">Parse selected tires</field>
                <field name="model_id" ref="model_virt_tire"/> 
               <field name="state">code</field>
               <field name="code">action = self.parse_name_all_sel_ids(cr, uid, context.get('active_ids',[]),context=context)</field>
        </record>
           <record id="upd_list_price_sel_products_server_act" model="ir.actions.server">
               <field name="name">Update price for selected products</field>
                <field name="model_id" ref="model_product_product"/> 
               <field name="state">code</field>
               <field name="code">action = self.upd_prod_price_sel_ids(cr, uid, context.get('active_ids',[]),context=context)</field>
        </record>
             
       <record model="ir.values" id="parse_all_name_ir_values_id">
            <field name="name"> Name of server act</field>
            <field name="model">virt.tire</field>
            <field name="key">action</field>
            <field name="key2">client_action_multi</field>
            <field name="value" eval="'ir.actions.server,%d'%parse_name_all_server_act"/> 
       </record>  
       <record id="parse_name_disk_all_server_act" model="ir.actions.server">
               <field name="name">Parse selected disks</field>
                <field name="model_id" ref="model_virt_disk"/> 
               <field name="state">code</field>
               <field name="code">action = self.parse_name_all_sel_ids(cr, uid, context.get('active_ids',[]),context=context)</field>
        </record>
       <record id="create_proxy_tires_server_act" model="ir.actions.server">
               <field name="name">Mark selected as TIRE and create proxies</field>
                <field name="model_id" ref="model_product_product"/> 
               <field name="state">code</field>
               <field name="code">action = self.create_proxy_tires_sel_ids(cr, uid, context.get('active_ids',[]),context=context)</field>
        </record>
       <record id="create_proxy_disks_server_act" model="ir.actions.server">
               <field name="name">Mark selected as DISK and create proxies</field>
                <field name="model_id" ref="model_product_product"/> 
               <field name="state">code</field>
               <field name="code">action = self.create_proxy_disks_sel_ids(cr, uid, context.get('active_ids',[]),context=context)</field>
        </record>
        <record id="create_proxy_disks_and_parse_server_act" model="ir.actions.server">
               <field name="name">Mark selected as DISK, create proxies and parse them.</field>
                <field name="model_id" ref="model_product_product"/> 
               <field name="state">code</field>
               <field name="code">action = self.create_proxy_and_parse_sel_ids(cr, uid, context.get('active_ids',[]), virt_type='virt.disk',context=context)</field>
        </record>
        <record id="create_proxy_tires_and_parse_server_act" model="ir.actions.server">
               <field name="name">Mark selected as TIRE, create proxies and parse them.</field>
                <field name="model_id" ref="model_product_product"/> 
               <field name="state">code</field>
               <field name="code">action = self.create_proxy_and_parse_sel_ids(cr, uid, context.get('active_ids',[]), virt_type='virt.tire',context=context)</field>
        </record>
             
       <record model="ir.values" id="parse_all_name_disk_ir_values_id">
            <field name="name"> Parse selected disks act</field>
            <field name="model">virt.disk</field>
            <field name="key">action</field>
            <field name="key2">client_action_multi</field>
            <field name="value" eval="'ir.actions.server,%d'%parse_name_disk_all_server_act"/> 
       </record>  
	</data>
</openerp>          